# PicHub 图片管理网站 - 需求规格说明书

## 1. 项目概述

### 1.1 项目背景
PicHub 是一个基于 Web 的智能图片管理系统，旨在为用户提供便捷的图片上传、存储、管理和检索服务。系统支持自动提取图片 EXIF 信息、AI 智能标签生成、多条件组合搜索以及基础图片编辑功能，并通过 MCP 接口支持自然语言交互。

### 1.2 项目目标
- 实现全部基础功能（用户管理、图片管理、标签系统、搜索、编辑等）
- 实现增强功能（AI 智能标签、MCP 接口）
- 支持 PC 和移动端浏览器访问
- 采用 Docker 容器化部署，一键启动
- 代码结构清晰，便于维护和扩展

### 1.3 技术栈
| 层次 | 技术选型 |
|------|---------|
| 前端 | Vue.js 3 + Element Plus + Tailwind CSS |
| 后端 | Node.js + Express + Sequelize ORM |
| 数据库 | MySQL 8.0 |
| AI 服务 | Google Gemini API |
| 部署 | Docker + Docker Compose |
| 版本控制 | Git |

---

## 2. 用户故事

### US-01: 用户注册与登录
**作为** 普通访客  
**我想要** 注册和登录账号  
**以便** 管理我的个人图片库

**验收标准**：
- 注册时需填写用户名、密码、邮箱
- 用户名长度 ≥6 字节，系统内唯一
- 密码长度 ≥6 字节
- 邮箱格式验证，系统内唯一
- 登录成功后跳转到图片管理页面

---

### US-02: 批量图片上传
**作为** 已登录用户  
**我想要** 批量上传多张图片并自动生成缩略图  
**以便** 快速构建我的图片库

**验收标准**：
- 支持单次上传最多 20 张图片
- 支持 JPG、PNG、GIF、WEBP 格式
- 单张图片最大 10MB
- 上传时显示进度条
- 上传成功后自动生成小、中两种尺寸缩略图

---

### US-03: EXIF 信息自动提取
**作为** 已登录用户  
**我想要** 系统自动从图片中提取元数据  
**以便** 后续按时间、地点等条件检索

**验收标准**：
- 自动提取拍摄时间（DateTime）
- 自动提取 GPS 坐标（经纬度）
- 自动提取图片分辨率（宽 x 高）
- GPS 坐标转换为地名（如"杭州西湖"）

---

### US-04: 自定义标签管理
**作为** 已登录用户  
**我想要** 给图片添加和删除自定义标签  
**以便** 按主题分类管理图片

**验收标准**：
- 支持自由输入创建新标签
- 支持从已有标签中选择
- 单张图片可添加多个标签（不限数量）
- 支持删除标签
- 标签支持中英文和特殊字符

---

### US-05: AI 智能标签生成
**作为** 已登录用户  
**我想要** 系统通过 AI 自动识别图片内容并生成标签  
**以便** 快速为大量图片分类

**验收标准**：
- 上传后可手动触发 AI 分析
- AI 识别场景类型（风景、室内、城市、自然等）
- AI 识别对象（人物、动物、植物、建筑、食物等）
- AI 识别色彩风格（黑白、复古、鲜艳等）
- 生成的标签自动添加到图片，用户可手动删除

---

### US-06: 多条件组合搜索
**作为** 已登录用户  
**我想要** 根据时间、标签、地点等条件搜索图片  
**以便** 快速找到想要的图片

**验收标准**：
- 支持按上传时间范围筛选
- 支持按拍摄时间范围筛选
- 支持按标签筛选（多选）
- 支持按地点筛选
- 支持按分辨率范围筛选
- 支持多条件组合查询

---

### US-07: 图片展示与轮播
**作为** 已登录用户  
**我想要** 以友好的方式浏览图片  
**以便** 获得良好的视觉体验

**验收标准**：
- 图片列表采用瀑布流布局
- 点击图片进入详情页，显示原图和元数据
- 详情页支持左右切换查看相邻图片
- 提供全屏轮播模式，支持自动播放

---

### US-08: 图片编辑
**作为** 已登录用户  
**我想要** 对图片进行简单的编辑  
**以便** 不离开网站就能处理图片

**验收标准**：
- 支持裁剪（自由比例或固定比例）
- 支持旋转（90°、180°、270°）
- 支持调整亮度、对比度、饱和度
- 支持撤销和重做（最多 10 步）
- 编辑后生成新副本，不覆盖原图

---

### US-09: 图片删除
**作为** 已登录用户  
**我想要** 删除不需要的图片  
**以便** 保持图片库整洁

**验收标准**：
- 支持单张删除
- 支持批量删除
- 删除前需要二次确认
- 删除后同时删除原图、缩略图和数据库记录

---

### US-10: 移动端友好访问
**作为** 移动端用户  
**我想要** 在手机浏览器或微信中正常使用所有功能  
**以便** 随时随地管理图片

**验收标准**：
- 响应式布局，自动适配手机屏幕
- 在 iOS Safari、Android Chrome、微信内置浏览器中正常显示
- 图片编辑功能在移动端简化（仅保留裁剪和旋转）
- 上传功能支持调用手机相机拍照

---

### US-11: MCP 接口与自然语言检索
**作为** 技术用户  
**我想要** 通过大模型对话方式检索图片  
**以便** 探索更智能的交互方式

**验收标准**：
- 提供 MCP Server 接口
- 大模型可以调用图片检索工具
- 支持自然语言查询（如"上个月在北京拍的风景照"）
- 返回符合条件的图片列表

---

## 3. 功能需求详细说明

### 3.1 用户管理模块

#### 3.1.1 用户注册
- **输入**：用户名、密码、确认密码、邮箱
- **验证规则**：
  - 用户名：6-20 字节，支持字母、数字、下划线
  - 密码：6-20 字节，建议包含字母和数字
  - 邮箱：符合邮箱格式（使用正则验证）
  - 用户名和邮箱系统内唯一
- **处理流程**：
  1. 前端验证输入格式
  2. 后端验证唯一性
  3. 密码使用 BCrypt 加密存储
  4. 注册成功后自动登录
- **异常处理**：
  - 用户名已存在：返回错误提示
  - 邮箱已存在：返回错误提示
  - 格式不符：前端实时提示

#### 3.1.2 用户登录
- **输入**：用户名/邮箱、密码
- **处理流程**：
  1. 验证用户存在
  2. 验证密码正确
  3. 生成 JWT Token
  4. 返回 Token 和用户信息
- **异常处理**：
  - 用户不存在或密码错误：返回统一错误提示（安全考虑）

#### 3.1.3 用户权限
- 每个用户只能访问和管理自己上传的图片
- 图片、标签、编辑记录等数据均隔离

---

### 3.2 图片管理模块

#### 3.2.1 图片上传
- **支持格式**：JPG、JPEG、PNG、GIF、WEBP
- **文件大小**：单张最大 10MB
- **批量上传**：单次最多 20 张
- **处理流程**：
  1. 前端选择文件，显示预览
  2. 文件上传到后端
  3. 后端保存原图到文件系统
  4. 异步生成缩略图（小：200x200，中：800x600）
  5. 提取 EXIF 信息
  6. 保存图片记录到数据库
  7. 返回上传结果
- **文件存储路径**：`/uploads/{userId}/{year}/{month}/{filename}`

#### 3.2.2 EXIF 信息提取
- **使用库**：metadata-extractor（Java）
- **提取字段**：
  - 拍摄时间（DateTime）
  - GPS 坐标（经纬度）
  - 分辨率（宽 x 高）
  - 相机型号（可选）
  - 光圈、快门速度（可选）
- **GPS 转地名**：
  - 调用高德地图 API 或 Google Geocoding API
  - 返回格式：国家、省份、城市、具体地点
  - 失败时仅保存坐标

#### 3.2.3 缩略图生成
- **尺寸**：
  - 小缩略图：200x200（用于列表展示）
  - 中缩略图：800x600（用于详情预览）
- **生成规则**：
  - 保持宽高比，不拉伸
  - 超出部分裁剪（中心对齐）
- **存储路径**：`/uploads/{userId}/{year}/{month}/thumbnails/`

#### 3.2.4 图片列表展示
- **布局方式**：瀑布流（Masonry Grid）
- **分页加载**：每页 20 张
- **排序方式**：
  - 默认：上传时间倒序
  - 可选：拍摄时间、文件大小
- **显示信息**：缩略图、文件名、标签（最多 3 个）

#### 3.2.5 图片详情
- **显示内容**：
  - 原图（可缩放）
  - 文件名、上传时间、拍摄时间
  - 分辨率、文件大小
  - 地点（如有）
  - 自定义标签、AI 标签
- **操作按钮**：
  - 编辑
  - 删除
  - 下载原图
  - 左右切换图片

---

### 3.3 标签管理模块

#### 3.3.1 自定义标签
- **创建标签**：
  - 输入框自由创建
  - 下拉选择已有标签
  - 支持批量添加
- **标签规则**：
  - 长度：1-20 字符
  - 支持中英文、数字、下划线
  - 同一图片不可添加重复标签
- **标签删除**：
  - 点击标签上的 × 删除
  - 不影响其他图片的相同标签

#### 3.3.2 AI 智能标签
- **触发方式**：
  - 上传后手动点击"生成 AI 标签"
  - 可批量生成
- **调用 AI**：
  - 使用 Google Gemini Vision API
  - Prompt 示例：
    ```
    请分析这张图片，从以下维度生成标签（每个维度最多3个标签）：
    1. 场景类型（如：风景、室内、城市、自然、海滩等）
    2. 主要对象（如：人物、动物、植物、建筑、食物等）
    3. 色彩风格（如：黑白、复古、鲜艳、柔和等）
    
    请以JSON格式返回：
    {
      "scene": ["标签1", "标签2"],
      "objects": ["标签1", "标签2"],
      "style": ["标签1"]
    }
    ```
- **标签存储**：
  - AI 标签与自定义标签存储在同一表
  - 通过 `tag_type` 字段区分（custom / ai）
- **用户权限**：
  - 用户可以删除 AI 生成的标签
  - 不会自动覆盖用户已添加的标签

---

### 3.4 搜索与查询模块

#### 3.4.1 基础搜索
- **搜索条件**：
  - 上传时间范围（日期选择器）
  - 拍摄时间范围（日期选择器）
  - 标签（多选下拉框，支持自定义和 AI 标签）
  - 地点（输入框模糊匹配）
  - 分辨率范围（最小宽度、最大宽度）
  - 文件名（模糊匹配）
- **查询逻辑**：
  - 所有条件使用 AND 逻辑
  - 标签使用 OR 逻辑（匹配任一标签即可）
- **结果展示**：
  - 瀑布流布局
  - 显示匹配数量
  - 支持排序

#### 3.4.2 自然语言搜索（增强功能）
- **实现方案**：
  - 前端提供搜索框
  - 后端接收自然语言查询
  - 调用 Gemini API 解析意图，转换为结构化查询条件
  - 执行数据库查询
- **示例查询**：
  - "上个月在北京拍的风景照" → 
    - 时间：上个月
    - 地点：北京
    - 标签：风景
  - "分辨率大于1920x1080的照片" →
    - 最小宽度：1920
    - 最小高度：1080

---

### 3.5 图片编辑模块

#### 3.5.1 编辑功能
- **裁剪**：
  - 支持自由比例裁剪
  - 支持固定比例（1:1、4:3、16:9）
  - 拖拽调整裁剪区域
- **旋转**：
  - 顺时针旋转 90°、180°、270°
  - 支持水平翻转、垂直翻转
- **调色**：
  - 亮度调整（-100 到 +100）
  - 对比度调整（-100 到 +100）
  - 饱和度调整（-100 到 +100）
  - 实时预览效果

#### 3.5.2 撤销与重做
- **历史记录栈**：
  - 最多保存 10 步操作
  - 支持撤销（Undo）和重做（Redo）
  - 使用 Command 模式实现

#### 3.5.3 保存
- **保存方式**：
  - 生成新图片副本
  - 文件名格式：`原文件名_edited_时间戳.jpg`
  - 不覆盖原图
- **数据库记录**：
  - 新图片作为独立记录
  - 添加字段标记为编辑版本
  - 关联到原图 ID

---

### 3.6 MCP 接口模块（增强功能）

#### 3.6.1 MCP Server 实现
- **协议**：遵循 MCP (Model Context Protocol) 规范
- **提供的工具**：
  - `search_images`：根据条件搜索图片
    - 参数：时间范围、标签、地点、关键词
    - 返回：图片列表（ID、URL、标签、时间）
  - `get_image_details`：获取图片详细信息
    - 参数：图片 ID
    - 返回：完整元数据
  - `get_statistics`：获取统计信息
    - 返回：总图片数、标签分布、时间分布等

#### 3.6.2 集成方式
- 大模型（如 Claude、GPT）通过 MCP 协议连接到后端
- 用户在大模型界面用自然语言查询
- 大模型自动调用 `search_images` 工具
- 返回结果以友好方式展示

---

### 3.7 移动端适配

#### 3.7.1 响应式设计
- **断点设置**：
  - 手机：< 768px
  - 平板：768px - 1024px
  - 桌面：> 1024px
- **布局调整**：
  - 手机：单列瀑布流
  - 平板：双列瀑布流
  - 桌面：三列瀑布流

#### 3.7.2 交互优化
- **触摸手势**：
  - 左右滑动切换图片
  - 双指缩放查看图片
  - 长按显示操作菜单
- **移动端简化**：
  - 编辑功能仅保留裁剪和旋转
  - 搜索条件折叠为抽屉式
  - 上传按钮支持调用系统相机

---

## 4. 数据库设计

### 4.1 ER 图概述
```
[User] 1 ──── * [Image]
[Image] 1 ──── * [ImageTag]
[Tag] 1 ──── * [ImageTag]
[Image] 1 ──── 1 [ImageMetadata]
```

### 4.2 表结构设计

#### 4.2.1 用户表（user）
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PK, AUTO_INCREMENT | 用户ID |
| username | VARCHAR(50) | UNIQUE, NOT NULL | 用户名 |
| email | VARCHAR(100) | UNIQUE, NOT NULL | 邮箱 |
| password | VARCHAR(255) | NOT NULL | 密码（BCrypt加密） |
| created_at | DATETIME | NOT NULL | 注册时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |

#### 4.2.2 图片表（image）
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PK, AUTO_INCREMENT | 图片ID |
| user_id | BIGINT | FK, NOT NULL | 所属用户 |
| filename | VARCHAR(255) | NOT NULL | 文件名 |
| original_path | VARCHAR(500) | NOT NULL | 原图路径 |
| thumbnail_small | VARCHAR(500) | | 小缩略图路径 |
| thumbnail_medium | VARCHAR(500) | | 中缩略图路径 |
| file_size | BIGINT | NOT NULL | 文件大小（字节） |
| mime_type | VARCHAR(50) | NOT NULL | MIME类型 |
| width | INT | | 宽度（像素） |
| height | INT | | 高度（像素） |
| is_edited | BOOLEAN | DEFAULT FALSE | 是否为编辑版本 |
| parent_image_id | BIGINT | FK, NULL | 原图ID（编辑版本） |
| upload_time | DATETIME | NOT NULL | 上传时间 |
| created_at | DATETIME | NOT NULL | 创建时间 |

#### 4.2.3 图片元数据表（image_metadata）
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PK, AUTO_INCREMENT | 元数据ID |
| image_id | BIGINT | FK, UNIQUE, NOT NULL | 图片ID |
| capture_time | DATETIME | | 拍摄时间 |
| gps_latitude | DECIMAL(10,8) | | GPS纬度 |
| gps_longitude | DECIMAL(11,8) | | GPS经度 |
| location_name | VARCHAR(255) | | 地点名称 |
| camera_model | VARCHAR(100) | | 相机型号 |
| aperture | VARCHAR(20) | | 光圈 |
| shutter_speed | VARCHAR(20) | | 快门速度 |
| iso | INT | | ISO值 |

#### 4.2.4 标签表（tag）
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PK, AUTO_INCREMENT | 标签ID |
| name | VARCHAR(50) | UNIQUE, NOT NULL | 标签名称 |
| tag_type | ENUM('custom','ai') | NOT NULL | 标签类型 |
| created_at | DATETIME | NOT NULL | 创建时间 |

#### 4.2.5 图片标签关联表（image_tag）
| 字段名 | 类型 | 约束 | 说明 |
|--------|------|------|------|
| id | BIGINT | PK, AUTO_INCREMENT | 关联ID |
| image_id | BIGINT | FK, NOT NULL | 图片ID |
| tag_id | BIGINT | FK, NOT NULL | 标签ID |
| created_at | DATETIME | NOT NULL | 添加时间 |
| UNIQUE(image_id, tag_id) | | | 联合唯一索引 |

### 4.3 索引设计
- `user.username`, `user.email`：唯一索引
- `image.user_id`：普通索引（查询用户图片）
- `image.upload_time`：普通索引（时间排序）
- `image_metadata.capture_time`：普通索引（时间查询）
- `image_metadata.location_name`：全文索引（地点搜索）
- `tag.name`：唯一索引
- `image_tag(image_id, tag_id)`：联合唯一索引

---

## 5. 系统架构设计

### 5.1 总体架构
```
┌─────────────────────────────────────────────────┐
│                   用户层                         │
│  PC浏览器 / 移动浏览器 / 微信浏览器 / MCP客户端  │
└─────────────────────────────────────────────────┘
                        ↓ HTTPS
┌─────────────────────────────────────────────────┐
│                   前端层                         │
│          React + Ant Design + Tailwind          │
│      (Nginx静态资源服务 + SPA路由)              │
└─────────────────────────────────────────────────┘
                        ↓ REST API / MCP
┌─────────────────────────────────────────────────┐
│                   后端层                         │
│       Spring Boot + Spring Security + JWT       │
│  ┌──────────┬──────────┬──────────┬──────────┐ │
│  │ 用户服务 │ 图片服务 │ 标签服务 │ MCP服务  │ │
│  └──────────┴──────────┴──────────┴──────────┘ │
│  ┌──────────────────────────────────────────┐  │
│  │         AI服务（Gemini API调用）         │  │
│  └──────────────────────────────────────────┘  │
└─────────────────────────────────────────────────┘
                        ↓ JPA
┌─────────────────────────────────────────────────┐
│                   数据层                         │
│  ┌──────────────┐      ┌───────────────────┐   │
│  │  MySQL 8.0   │      │  文件存储系统     │   │
│  │  (结构化数据) │      │  (原图+缩略图)    │   │
│  └──────────────┘      └───────────────────┘   │
└─────────────────────────────────────────────────┘
```

### 5.2 前端架构
- **技术栈**：React 18 + React Router + Redux Toolkit
- **UI组件库**：Ant Design 5.x
- **样式方案**：Tailwind CSS
- **图片编辑**：Cropper.js + Fabric.js
- **文件上传**：Axios + FormData
- **状态管理**：Redux Toolkit（用户状态、图片列表缓存）

### 5.3 后端架构
- **技术栈**：Spring Boot 3.2 + Spring Data JPA + Spring Security
- **认证方式**：JWT Token（有效期7天）
- **文件上传**：MultipartFile 处理
- **异步任务**：使用 `@Async` 处理缩略图生成和 AI 分析
- **API设计**：RESTful 风格

### 5.4 部署架构（Docker Compose）
```yaml
services:
  frontend:
    # Nginx + React静态资源
    ports: 80:80
  
  backend:
    # Spring Boot应用
    ports: 8080:8080
    depends_on: [mysql]
  
  mysql:
    # MySQL 8.0
    ports: 3306:3306
    volumes: [mysql-data]
```

---

## 6. 接口设计概要

### 6.1 用户接口
| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 注册 | POST | `/api/auth/register` | 用户注册 |
| 登录 | POST | `/api/auth/login` | 用户登录 |
| 获取当前用户 | GET | `/api/auth/me` | 获取当前用户信息 |

### 6.2 图片接口
| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 上传图片 | POST | `/api/images/upload` | 批量上传 |
| 获取图片列表 | GET | `/api/images` | 分页查询 |
| 获取图片详情 | GET | `/api/images/{id}` | 详情信息 |
| 删除图片 | DELETE | `/api/images/{id}` | 删除图片 |
| 编辑图片 | POST | `/api/images/{id}/edit` | 保存编辑 |

### 6.3 标签接口
| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 添加标签 | POST | `/api/images/{id}/tags` | 为图片添加标签 |
| 删除标签 | DELETE | `/api/images/{id}/tags/{tagId}` | 删除图片标签 |
| 获取所有标签 | GET | `/api/tags` | 标签列表 |
| 生成AI标签 | POST | `/api/images/{id}/ai-tags` | 触发AI分析 |

### 6.4 搜索接口
| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 高级搜索 | POST | `/api/images/search` | 多条件搜索 |
| 自然语言搜索 | POST | `/api/images/nl-search` | 自然语言查询 |

### 6.5 MCP 接口
| 工具名称 | 说明 | 参数 |
|----------|------|------|
| `search_images` | 搜索图片 | 时间、标签、地点 |
| `get_image_details` | 获取图片详情 | 图片ID |
| `get_statistics` | 获取统计信息 | 无 |

---

## 7. 非功能性需求

### 7.1 性能要求
- **响应时间**：
  - 页面首次加载 < 2 秒
  - 图片列表加载 < 1 秒
  - 单张图片上传（5MB）< 5 秒
- **并发能力**：
  - 支持 5 个并发用户（演示级别）
- **数据库查询**：
  - 单次查询 < 500ms

### 7.2 安全要求
- **密码存储**：使用 BCrypt 加密（Cost Factor: 10）
- **认证**：JWT Token，有效期 7 天
- **文件上传**：
  - 验证文件类型（MIME Type + 文件头）
  - 限制文件大小
  - 防止路径遍历攻击
- **XSS 防护**：前端输入转义
- **CSRF 防护**：使用 CSRF Token（Spring Security）

### 7.3 可用性要求
- **浏览器兼容**：
  - Chrome 90+
  - Safari 14+
  - Firefox 88+
  - 微信内置浏览器
- **错误处理**：
  - 友好的错误提示
  - 关键操作失败后可重试
- **日志记录**：
  - 记录所有 API 请求
  - 记录异常堆栈

### 7.4 可维护性要求
- **代码规范**：
  - 前端：ESLint + Prettier
  - 后端：Checkstyle + SonarQube
- **Git提交规范**：使用 Conventional Commits
  - feat: 新功能
  - fix: 修复
  - docs: 文档
  - refactor: 重构
- **文档**：
  - README：快速入门
  - API文档：Swagger/OpenAPI
  - 数据库文档：表结构说明

---

## 8. 开发计划

### 阶段一：基础框架搭建（3天）
- [ ] 初始化前后端项目
- [ ] 配置 Docker Compose
- [ ] 设计数据库表结构
- [ ] 实现用户注册/登录
- [ ] 实现 JWT 认证

### 阶段二：核心功能开发（5天）
- [ ] 图片上传与存储
- [ ] 缩略图生成
- [ ] EXIF 信息提取
- [ ] 图片列表与详情展示
- [ ] 自定义标签管理

### 阶段三：搜索与查询（2天）
- [ ] 多条件搜索
- [ ] 自然语言搜索（调用 Gemini API）

### 阶段四：图片编辑（2天）
- [ ] 裁剪、旋转功能
- [ ] 调色功能
- [ ] 撤销/重做

### 阶段五：增强功能（2天）
- [ ] AI 智能标签生成
- [ ] MCP 接口实现

### 阶段六：移动端适配（1天）
- [ ] 响应式布局
- [ ] 触摸手势优化

### 阶段七：测试与完善（2天）
- [ ] 功能测试
- [ ] 性能优化
- [ ] Bug 修复
- [ ] 文档编写

---

## 9. 验收标准

### 9.1 功能验收
- [ ] 所有基础功能（1-11）可正常运行
- [ ] AI 智能标签可演示
- [ ] MCP 接口可通过大模型调用
- [ ] 在 PC 和手机浏览器上正常显示

### 9.2 技术验收
- [ ] Docker Compose 一键启动成功
- [ ] 数据库表结构完整
- [ ] Git 提交记录清晰（> 30 次提交）
- [ ] 代码通过 ESLint/Checkstyle 检查

### 9.3 文档验收
- [ ] 设计文档完整（本文档）
- [ ] 使用手册清晰
- [ ] API 文档完整（Swagger）
- [ ] 演示视频清晰（5-10分钟）

---

## 10. 风险与对策

### 10.1 技术风险
| 风险 | 概率 | 影响 | 对策 |
|------|------|------|------|
| Gemini API 调用失败 | 中 | 中 | 使用国内 API 备选方案（如通义千问） |
| GPS 转地名 API 限额 | 低 | 低 | 使用免费额度，失败时仅显示坐标 |
| 图片处理性能差 | 低 | 中 | 使用异步任务，添加进度提示 |

### 10.2 时间风险
| 风险 | 概率 | 影响 | 对策 |
|------|------|------|------|
| 开发时间不足 | 中 | 高 | 优先实现基础功能，增强功能可简化 |
| Docker 部署问题 | 低 | 中 | 提前测试，准备详细部署文档 |

---

## 11. 附录

### 11.1 参考资料
- Spring Boot 官方文档：https://spring.io/projects/spring-boot
- React 官方文档：https://react.dev
- Ant Design：https://ant.design
- Gemini API：https://ai.google.dev
- MCP 协议：https://spec.modelcontextprotocol.io

### 11.2 术语表
| 术语 | 说明 |
|------|------|
| EXIF | Exchangeable Image File Format，可交换图像文件格式 |
| JWT | JSON Web Token，用于认证的令牌 |
| MCP | Model Context Protocol，模型上下文协议 |
| BCrypt | 密码哈希算法 |
| ORM | Object-Relational Mapping，对象关系映射 |
